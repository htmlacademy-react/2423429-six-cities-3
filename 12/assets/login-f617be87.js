import{r as l,u,a as _,b as h,A as x,c as m,j as s,H as f,s as p,l as j}from"./index-dd216caa.js";const N=e=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e),w=e=>/^(?=.*[a-zA-Z])(?=.*\d).+$/.test(e);function R(){const e=l.useRef(null),a=l.useRef(null),{isLoading:n}=u(i=>i.user),{authorizationStatus:o}=u(i=>i.user),t=_(),r=h();l.useEffect(()=>{o===x.Auth&&r(m.Root)},[o,r]);const g=async i=>{if(i.preventDefault(),!e.current||!a.current)return;const c=e.current.value.trim(),d=a.current.value.trim();if(!(N(c)&&w(d))){t(p("password should contain at least one letter and one number and email should be valid"));return}try{await t(j({login:c,password:d})).unwrap(),r(m.Root)}catch{t(p("Failed to login. Please try again."))}};return s.jsxs("div",{className:"page page--gray page--login",children:[s.jsx(f,{showNav:!1}),s.jsx("main",{className:"page__main page__main--login",children:s.jsxs("div",{className:"page__login-container container",children:[s.jsxs("section",{className:"login",children:[s.jsx("h1",{className:"login__title",children:"Sign in"}),s.jsxs("form",{className:"login__form form",action:"#",onSubmit:g,method:"post",children:[s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"E-mail"}),s.jsx("input",{ref:e,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0,disabled:n})]}),s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"Password"}),s.jsx("input",{ref:a,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0,disabled:n})]}),s.jsx("button",{className:"login__submit form__submit button",type:"submit",disabled:n,children:n?"Signing in...":"Sign in"})]})]}),s.jsx("section",{className:"locations locations--login locations--current",children:s.jsx("div",{className:"locations__item",children:s.jsx("a",{className:"locations__item-link",href:"#",children:s.jsx("span",{children:"Amsterdam"})})})})]})})]})}export{R as default};
