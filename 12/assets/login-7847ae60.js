import{r as l,u,a as h,b as x,A as f,c as j,j as s,H as N,s as m,l as v}from"./index-60f2dcd3.js";function R(){const n=l.useRef(null),t=l.useRef(null),{isLoading:a}=u(e=>e.user),{authorizationStatus:o}=u(e=>e.user),r=h(),c=x();l.useEffect(()=>{o===f.Auth&&c(j.Root)},[o,c]);const p=e=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e),g=e=>/^(?=.*[a-zA-Z])(?=.*\d).+$/.test(e),_=e=>{if(e.preventDefault(),!n.current||!t.current)return;const i=n.current.value.trim(),d=t.current.value.trim();if(!(p(i)&&g(d))){r(m("password should contain at least one letter and one number and email should be valid"));return}(async()=>{try{await r(v({login:i,password:d})).unwrap()}catch{r(m("Failed to login. Please try again."))}})()};return s.jsxs("div",{className:"page page--gray page--login",children:[s.jsx(N,{showNav:!1}),s.jsx("main",{className:"page__main page__main--login",children:s.jsxs("div",{className:"page__login-container container",children:[s.jsxs("section",{className:"login",children:[s.jsx("h1",{className:"login__title",children:"Sign in"}),s.jsxs("form",{className:"login__form form",action:"#",onSubmit:_,method:"post",children:[s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"E-mail"}),s.jsx("input",{ref:n,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0,disabled:a})]}),s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"Password"}),s.jsx("input",{ref:t,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0,disabled:a})]}),s.jsx("button",{className:"login__submit form__submit button",type:"submit",disabled:a,children:a?"Signing in...":"Sign in"})]})]}),s.jsx("section",{className:"locations locations--login locations--current",children:s.jsx("div",{className:"locations__item",children:s.jsx("a",{className:"locations__item-link",href:"#",children:s.jsx("span",{children:"Amsterdam"})})})})]})})]})}export{R as default};
