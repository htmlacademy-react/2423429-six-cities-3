import{r as e,u as p,a as h,b as x,A as f,c as j,s as g,l as b,j as a,H as N}from"./index-6cdd8353.js";function R(){const l=e.useRef(null),r=e.useRef(null),{isLoading:i}=p(s=>s.user),{authorizationStatus:o}=p(s=>s.user),n=h(),c=x();e.useEffect(()=>{o===f.Auth&&c(j.Root)},[o,c]);const d=e.useCallback(s=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s),[]),u=e.useCallback(s=>/^(?=.*[a-zA-Z])(?=.*\d).+$/.test(s),[]),_=e.useCallback(s=>{if(s.preventDefault(),!l.current||!r.current)return;const t=l.current.value.trim(),m=r.current.value.trim();if(!(d(t)&&u(m))){n(g("password should contain at least one letter and one number and email should be valid"));return}(async()=>{try{await n(b({login:t,password:m})).unwrap()}catch{n(g("Failed to login. Please try again."))}})()},[n,d,u]);return a.jsxs("div",{className:"page page--gray page--login",children:[a.jsx(N,{showNav:!1}),a.jsx("main",{className:"page__main page__main--login",children:a.jsxs("div",{className:"page__login-container container",children:[a.jsxs("section",{className:"login",children:[a.jsx("h1",{className:"login__title",children:"Sign in"}),a.jsxs("form",{className:"login__form form",action:"#",onSubmit:_,method:"post",children:[a.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[a.jsx("label",{className:"visually-hidden",children:"E-mail"}),a.jsx("input",{ref:l,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0,disabled:i})]}),a.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[a.jsx("label",{className:"visually-hidden",children:"Password"}),a.jsx("input",{ref:r,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0,disabled:i})]}),a.jsx("button",{className:"login__submit form__submit button",type:"submit",disabled:i,children:i?"Signing in...":"Sign in"})]})]}),a.jsx("section",{className:"locations locations--login locations--current",children:a.jsx("div",{className:"locations__item",children:a.jsx("a",{className:"locations__item-link",href:"#",children:a.jsx("span",{children:"Amsterdam"})})})})]})})]})}export{R as default};
