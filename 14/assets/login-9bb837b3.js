import{r as a,u as p,g as w,a as N,b as v,c as b,C as g,A as S,d as h,j as e,H as A,s as _,l as R,e as E}from"./index-d61156ef.js";const y=t=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t),z=t=>/^(?=.*[a-zA-Z])(?=.*\d).+$/.test(t);function k(){const t=a.useRef(null),n=a.useRef(null),o=p(w),c=p(N),[i,f]=a.useState(null),l=v(),r=b(),[,u]=a.useState(""),[,d]=a.useState("");a.useEffect(()=>()=>{u(""),d("")},[]),a.useEffect(()=>{const s=Math.floor(Math.random()*g.length);f(g[s])},[]),a.useEffect(()=>{c===S.Auth&&r(h.Root)},[c,r]);const x=async()=>{if(!t.current||!n.current)return;const s=t.current.value.trim(),m=n.current.value.trim();if(!(y(s)&&z(m))){l(_("password should contain at least one letter and one number and email should be valid"));return}try{await l(R({login:s,password:m})).unwrap(),u(""),d("")}catch{l(_("Failed to login. Please try again."))}},j=s=>{s.preventDefault(),i&&(l(E(i)),r(h.Root))};return e.jsxs("div",{className:"page page--gray page--login",children:[e.jsx(A,{showNav:!1}),e.jsx("main",{className:"page__main page__main--login",children:e.jsxs("div",{className:"page__login-container container",children:[e.jsxs("section",{className:"login",children:[e.jsx("h1",{className:"login__title",children:"Sign in"}),e.jsxs("form",{className:"login__form form",action:"#",onSubmit:s=>{s.preventDefault(),x()},method:"post",children:[e.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[e.jsx("label",{className:"visually-hidden",children:"E-mail"}),e.jsx("input",{ref:t,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0,disabled:o})]}),e.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[e.jsx("label",{className:"visually-hidden",children:"Password"}),e.jsx("input",{ref:n,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0,disabled:o})]}),e.jsx("button",{className:"login__submit form__submit button",type:"submit",disabled:o,children:o?"Signing in...":"Sign in"})]})]}),e.jsx("section",{className:"locations locations--login locations--current",children:e.jsx("div",{className:"locations__item",children:e.jsx("a",{className:"locations__item-link",href:"#",onClick:j,children:e.jsx("span",{children:i==null?void 0:i.name})})})})]})})]})}export{k as default};
